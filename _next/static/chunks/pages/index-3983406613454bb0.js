(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(4340)}])},4340:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Home}});var s=a(5893),r=a(7294);let l=["World History","Science","Pop Culture","Literature","Sports","Geography"],o=[200,400,600,800,1e3],createDefaultQuestions=e=>({text:"This clue worth $"+e+" needs to be filled in",answer:"What is the answer?",value:e,revealed:!1,answered:!1,dailyDouble:!1,ruleViolation:null,ratings:[]}),initializeCategories=()=>l.map(e=>({title:e,questions:o.map(createDefaultQuestions),difficultyAdjustments:{200:0,400:0,600:0,800:0,1e3:0}})),initializePlayers=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[];for(let a=1;a<=e;a++)t.push({name:"Player ".concat(a),score:0,active:1===a});return t};function JeopardyGame(){let[e,t]=(0,r.useState)(3),[a,n]=(0,r.useState)({categories:initializeCategories(),players:initializePlayers(e),currentPlayer:0,finalJeopardyActive:!1}),[i,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[g,m]=(0,r.useState)("openrouter"),[h,p]=(0,r.useState)(""),[y,f]=(0,r.useState)("google/gemini-2.5-flash-lite"),[x,v]=(0,r.useState)(""),[j,b]=(0,r.useState)("http://localhost:11434"),[w,N]=(0,r.useState)(.7),[S,k]=(0,r.useState)('Create a high-quality Jeopardy! game board with diverse, challenging, and well-structured categories and questions. Follow these key principles:\n\n- Make clues SPECIFIC with ONE unambiguous answer (e.g., NOT "This East Asian country has a unique blend of traditional culture" - too vague)\n- Use clever, engaging category titles\n- Ensure gradual difficulty increase from $200 to $1000 questions\n- Make clues factually accurate and verifiable\n- Format answers as questions ("Who is/What is...")\n- Do not repeat concepts across categories\n- NEVER include answer words in the clue text'),[C,I]=(0,r.useState)(""),[A,P]=(0,r.useState)(!1),[q,E]=(0,r.useState)(!1),[O,T]=(0,r.useState)(!1),[D,J]=(0,r.useState)(null),[_,R]=(0,r.useState)("standard"),[M,F]=(0,r.useState)({}),[L,$]=(0,r.useState)(null),[z,U]=(0,r.useState)(!1),[B,W]=(0,r.useState)(!1),[Q,G]=(0,r.useState)(null),[H,X]=(0,r.useState)(null),[V,Y]=(0,r.useState)(!1),[K,Z]=(0,r.useState)([]),[ee,et]=(0,r.useState)(e);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("jeopardy_api_key");e&&p(e);let t=localStorage.getItem("jeopardy_ai_provider");t&&("openrouter"===t||"ollama"===t)&&m(t);let a=localStorage.getItem("jeopardy_model_id");a&&f(a);let s=localStorage.getItem("jeopardy_ollama_model");s&&v(s);let r=localStorage.getItem("jeopardy_ollama_url");r&&b(r);let l=localStorage.getItem("jeopardy_system_message");l&&k(l);let o=localStorage.getItem("jeopardy_temperature");o&&N(parseFloat(o));let n=localStorage.getItem("jeopardy_theme");n&&R(n)}catch(e){}},[]),(0,r.useEffect)(()=>{localStorage.setItem("jeopardy_theme",_)},[_]);let handleQuestionSelect=(e,t)=>{let s=a.categories[e].questions[t];if(s.answered)return;c({categoryIndex:e,questionIndex:t}),u(!1),F({});let r=[...a.categories];r[e].questions[t].revealed=!0,n({...a,categories:r}),setTimeout(()=>{window.scrollTo(0,0),document.body.style.overflow="hidden"},100),s.dailyDouble?($(null),U(!0)):U(!1)},handleDailyDoubleWager=e=>{if(!i)return;let{categoryIndex:t,questionIndex:s}=i;a.categories[t].questions[s];let r=a.players[a.currentPlayer].score,l=Math.max(r,1e3),o=e;e<100&&(o=100),e>l&&(o=l),$(o=100*Math.round(o/100)),U(!1)},toggleIncorrectPlayer=e=>{F(t=>({...t,[e]:!t[e]}))},adjustCategoryDifficulty=(e,t)=>{let a=e[t];a.difficultyAdjustments||(a.difficultyAdjustments={200:0,400:0,600:0,800:0,1e3:0});let s={};a.questions.forEach(e=>{if(e.ratings&&e.ratings.length>0){let t=e.value;s[t]||(s[t]=[]),s[t]=[...s[t],...e.ratings]}}),Object.keys(s).forEach(e=>{let t=parseInt(e,10),r=s[t];if(r&&r.length>=3){let e=r.filter(e=>"good"===e.rating).length,s=e/r.length;s>.65?a.difficultyAdjustments[t]=Math.min((a.difficultyAdjustments[t]||0)+1,2):s>.85?a.difficultyAdjustments[t]=2:s<.35?a.difficultyAdjustments[t]=Math.max((a.difficultyAdjustments[t]||0)-1,-2):s<.15&&(a.difficultyAdjustments[t]=-2)}});try{let e="jeopardy_difficulty_adjustments",t=localStorage.getItem(e),s=t?JSON.parse(t):{};s[a.title]=a.difficultyAdjustments,localStorage.setItem(e,JSON.stringify(s));let r="jeopardy_question_difficulty_ratings",l=localStorage.getItem(r)?JSON.parse(localStorage.getItem(r)||"[]"):[];a.questions.forEach(e=>{e.ratings&&e.ratings.length>0&&e.ratings.forEach(t=>{l.push({category:a.title,value:e.value,clue:e.text,answer:e.answer,rating:t.rating,timestamp:t.timestamp})})}),localStorage.setItem(r,JSON.stringify(l))}catch(e){console.error("Error saving difficulty adjustments:",e)}},handleAnswer=(e,t)=>{let s;if(!i)return;let{categoryIndex:r,questionIndex:l}=i,o=a.categories[r].questions[l].value;a.categories[r].questions[l].dailyDouble&&null!==L&&(o=L);let d=[...a.players],g=void 0!==t?t:a.currentPlayer;d[g].score+=e?o:-o;let m=[...a.categories],h={rating:e?"good":"bad",timestamp:new Date().toISOString()};m[r].questions[l].ratings||(m[r].questions[l].ratings=[]),m[r].questions[l].ratings.push(h),m[r].questions[l].answered=!0,adjustCategoryDifficulty(m,r),s=e&&void 0!==t?t:(a.currentPlayer+1)%a.players.length,n({...a,categories:m,players:d,currentPlayer:s}),document.body.style.overflow="",c(null),u(!1),$(null),U(!1)},handleEditCategory=e=>{B&&G({index:e,title:a.categories[e].title})},handleEditQuestion=(e,t)=>{if(!B)return;let s=a.categories[e].questions[t];X({categoryIndex:e,questionIndex:t,text:s.text,answer:s.answer,value:s.value,dailyDouble:s.dailyDouble})},validateQuestionRule=(e,t,a)=>{let normalizeText=e=>e.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()?]/g,""),s=normalizeText(e),r=normalizeText(t),l=normalizeText(a),o=s.split(/\s+/).filter(e=>e.length>2),n=r.split(/\s+/).filter(e=>e.length>2),i=l.split(/\s+/),c=[...o,...n],d=c.filter(e=>i.some(t=>t===e));if(d.length>0)return{valid:!1,reason:"Answer contains words from the clue or category: ".concat(d.join(", "))};let u=["known for","famous for","renowned for","recognized for","celebrated for","this country","this nation","this place","this region","this area","this city","this culture","this tradition","unique blend","rich history","diverse landscape"].some(e=>r.includes(normalizeText(e)));return u?{valid:!1,reason:"Question may be too vague and could accept multiple answers. Consider adding more specific, distinguishing details."}:{valid:!0}},logBadResponse=(e,t,a,s)=>{try{let r=JSON.parse(localStorage.getItem("jeopardy_format_issues")||"[]");r.push({category:e,clue:t,answer:a,issue:s,timestamp:new Date().toISOString()}),localStorage.setItem("jeopardy_format_issues",JSON.stringify(r))}catch(e){}},allQuestionsAnswered=()=>a.categories.every(e=>e.questions.every(e=>e.answered)),testApiKey=async()=>{if(J(null),"openrouter"===g){if(!h||!h.trim()){J({success:!1,message:"Please enter an API key"});return}if(!y||!y.trim()){J({success:!1,message:"Please enter a Model ID"});return}}else if("ollama"===g&&(!x||!x.trim())){J({success:!1,message:"Please enter an Ollama model name"});return}T(!0);try{var e,t,a,s,r;let l;let o='Respond with exactly: "API connection successful"';if(!(l="openrouter"===g?await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"HTTP-Referer":window.location.href,"X-Title":"Jeopardy Game - API Test"},body:JSON.stringify({model:y||"gpt-oss-120b",messages:[{role:"user",content:o}],max_tokens:50,temperature:.1})}):await fetch("".concat(j,"/api/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:x,messages:[{role:"user",content:o}],stream:!1,options:{temperature:.1,num_predict:50}})})).ok){let a="Error ".concat(l.status,": ");if("openrouter"===g){if(400===l.status){let t=await l.text();try{let s=JSON.parse(t);a+=(null===(e=s.error)||void 0===e?void 0:e.message)||"Bad request. Please check your API key and model ID format"}catch(e){a+="Bad request. Please check your API key and model ID format"}}else if(401===l.status)a+="Invalid API key";else if(404===l.status)a+="Model not found. Please check your Model ID";else if(429===l.status)a+="Rate limit exceeded. Please wait and try again";else if(402===l.status)a+="Insufficient credits on your OpenRouter account";else{let e=await l.text();try{let s=JSON.parse(e);a+=(null===(t=s.error)||void 0===t?void 0:t.message)||l.statusText}catch(e){a+=l.statusText}}}else if(404===l.status)a+='Model "'.concat(x,'" not found. Pull it with: ollama pull ').concat(x);else if(0!==l.status&&l.status){let e=await l.text();try{let t=JSON.parse(e);a+=t.error||l.statusText}catch(e){a+=l.statusText}}else a="Cannot connect to Ollama. Make sure Ollama is running with: ollama serve";J({success:!1,message:a});return}let n=await l.json();"openrouter"===g?n.choices&&(null===(s=n.choices[0])||void 0===s?void 0:null===(a=s.message)||void 0===a?void 0:a.content)?J({success:!0,message:'✓ Connection successful! Model "'.concat(y,'" is working.')}):J({success:!1,message:"Unexpected response format from API"}):(null===(r=n.message)||void 0===r?void 0:r.content)||n.response&&"string"==typeof n.response?J({success:!0,message:'✓ Ollama connection successful! Model "'.concat(x,'" is working.')}):J({success:!1,message:"Unexpected response format from Ollama. Make sure Ollama is running and the model is installed."})}catch(t){console.error("API test error:",t);let e="Connection failed: ";"ollama"===g&&t instanceof TypeError&&t.message.includes("fetch")?e="Cannot connect to Ollama. Please ensure:\n1. Ollama is installed and running (ollama serve)\n2. The URL is correct (default: http://localhost:11434)\n3. No firewall is blocking the connection":e+=t instanceof Error?t.message:"Unknown error",J({success:!1,message:e})}finally{T(!1)}},generateQuestions=async()=>{if("openrouter"===g){if(!h||!h.trim()){alert("Please enter an OpenRouter API key");return}if(!y||!y.trim()){alert("Please enter a Model ID (e.g., openai/gpt-4.1-mini, google/gemini-2.0-flash-001)");return}}else if("ollama"===g&&(!x||!x.trim())){alert("Please enter an Ollama model name (e.g., llama2, mistral)");return}localStorage.setItem("jeopardy_api_key",h),localStorage.setItem("jeopardy_ai_provider",g),localStorage.setItem("jeopardy_model_id",y),localStorage.setItem("jeopardy_ollama_model",x),localStorage.setItem("jeopardy_ollama_url",j),localStorage.setItem("jeopardy_system_message",S),localStorage.setItem("jeopardy_temperature",w.toString()),E(!0);try{var e,t,s,r,i,c;let d="";try{let e=localStorage.getItem("jeopardy_difficulty_adjustments"),t=localStorage.getItem("jeopardy_question_difficulty_ratings"),a=t?JSON.parse(t):[];if(e){let t=JSON.parse(e);Object.keys(t).forEach(e=>{let s=t[e],r=Object.values(s).some(e=>0!==e);if(r){d+='For category similar to "'.concat(e,'", adjust difficulty as follows:\n');let t=a.filter(t=>t.category.toLowerCase()===e.toLowerCase()||t.category.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.category.toLowerCase()));Object.keys(s).forEach(e=>{let a=parseInt(e,10),r=s[a];if(0!==r){if(r>0){d+="- For $".concat(a," questions: Make them ").concat(r>1?"significantly":"somewhat"," HARDER with more specific details and specialized knowledge\n");let e=t.filter(e=>e.value===a&&"good"===e.rating).slice(0,2);e.length>0&&(d+="  Examples of questions that were too easy:\n",e.forEach(e=>{d+='  * "'.concat(e.clue,'" → "').concat(e.answer,'"\n')}))}else if(r<0){d+="- For $".concat(a," questions: Make them ").concat(r<-1?"significantly":"somewhat"," EASIER with more common knowledge and simpler concepts\n");let e=t.filter(e=>e.value===a&&"bad"===e.rating).slice(0,2);e.length>0&&(d+="  Examples of questions that were too difficult:\n",e.forEach(e=>{d+='  * "'.concat(e.clue,'" → "').concat(e.answer,'"\n')}))}}}),d+="\n"}})}}catch(e){console.error("Error loading difficulty adjustments for AI prompt:",e)}let u=C?"".concat(S,"\n\n").concat(C):S,m="Create a new Jeopardy game board with EXACTLY 6 creative categories.\n        ".concat(u?"Use the following reference content for creating specialized categories and questions: ".concat(u):"",'\n        \n        For each category, create 5 clues with values from $200 to $1000, ensuring they increase in difficulty.\n        \n        Important:\n        - YOU MUST CREATE EXACTLY 6 CATEGORIES, no more and no less\n        - Create entirely new category titles that are clever and engaging\n        - Clues should be statements or facts, NOT questions\n        - Responses should always start with "What is" or "Who is" etc.\n        - Do not include the answer within the clue text\n        - Make sure clues don\'t give away the answer directly\n        - Include a balanced mix of topics and difficulty levels\n        - Mark EXACTLY 2 clues total as "dailyDouble: true" (these are special high-value clues)\n        - Do not add more than 2 Daily Doubles in total across all categories\n        ').concat(d?"\n\nDIFFICULTY ADJUSTMENT GUIDANCE based on player performance:\n".concat(d):"",'\n        \n        Format your response as JSON with this exact structure:\n        {\n          "categories": [\n            {\n              "title": "Category Name",\n              "questions": [\n                {\n                  "text": "The clue text that would be shown to contestants",\n                  "answer": "What is the correct response?",\n                  "value": 200,\n                  "dailyDouble": false\n                },\n                ... and so on for values 400, 600, 800, 1000\n              ]\n            },\n            ... repeat for exactly 6 categories, numbered from 0 to 5\n          ]\n        }\n        \n        IMPORTANT REQUIREMENTS:\n        1. The response MUST include EXACTLY 6 categories in the "categories" array.\n        2. There MUST be EXACTLY 2 questions total marked as dailyDouble: true across all categories.'),p={openrouter:"https://openrouter.ai/api/v1/chat/completions",ollama:"".concat(j,"/api/chat")},f=0,v=!1,b=null,N={openrouter:{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"HTTP-Referer":window.location.href,"X-Title":"Jeopardy Game"},body:JSON.stringify({model:y||"gpt-oss-120b",messages:[{role:"user",content:m}],max_tokens:4e3,temperature:w})},ollama:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:x,messages:[{role:"system",content:S},{role:"user",content:m}],stream:!1,options:{temperature:w,num_predict:4e3}})}};for(;f<=4&&!v;)try{let d,u;f>0&&console.log("Retrying API request (attempt ".concat(f," of ").concat(4,")...")),console.log("Making request to ".concat(g," API").concat(g!=g?" (via CORS proxy)":"",":"),{endpoint:p[g],method:N[g].method,headers:{...N[g].headers,"x-api-key":"***REDACTED***"}});let m={...N[g],mode:"cors",credentials:"omit"},h=await fetch(p[g],m);if(!h.ok){let t="";if(400===h.status){let t=await h.text();console.error("Bad request error details:",t);let a="";try{let s=JSON.parse(t);a=(null===(e=s.error)||void 0===e?void 0:e.message)||s.message||""}catch(e){a=t}throw Error("Bad request (400): ".concat(a||'Please check your API key and model ID format. For OpenRouter, use format like "openai/gpt-4o-mini" or "anthropic/claude-3-haiku"'))}if(429===h.status)t="Rate limit exceeded. Waiting and retrying...",await new Promise(e=>setTimeout(e,2e3*(f+1)));else if(401===h.status||403===h.status){let e=await h.text();throw console.error("Auth error details:",e),Error("Authentication failed: ".concat(h.status," ").concat(h.statusText,". Please check that your API key is valid, has not expired, and has the correct format."))}else if(0===h.status)throw console.error("Likely CORS error - no response from server"),Error("Network error connecting to the API. Please try using a different AI provider.");else if(h.status>=500)t="The AI service is currently experiencing issues. Retrying...",await new Promise(e=>setTimeout(e,1500));else{let e=await h.text();throw console.error("API error details:",e),Error("API request failed: ".concat(h.status," ").concat(h.statusText,". ").concat(e?"Details: ".concat(e):""))}if(b=Error(t),429===h.status||h.status>=500){f++;continue}throw b}v=!0;let y=await h.json(),x="";switch(g){case"openrouter":x=y.choices[0].message.content;break;case"ollama":x=(null===(t=y.message)||void 0===t?void 0:t.content)||y.response||"";break;default:x=(null===(i=y.choices)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:null===(s=r.message)||void 0===s?void 0:s.content)||(null===(c=y.message)||void 0===c?void 0:c.content)||""}try{let e=x.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(e)d=[e[1]],console.log("Found JSON in code block");else{let e=/(\{(?:[^{}]|(?:\{(?:[^{}]|(?:\{(?:[^{}]|(?:\{[^{}]*\}))*\}))*\}))*\})/g,t=x.match(e);if(t&&t.length>0)d=[t.sort((e,t)=>t.length-e.length)[0]],console.log("Found JSON with balanced brace matching");else{let e=x.match(/\{[\s\S]*?\}/g);e?(d=[e.sort((e,t)=>t.length-e.length)[0]],console.log("Found JSON by simple brace matching")):(d=x.match(/\{[\s\S]*\}/),console.log("Using fallback JSON extraction"))}}}catch(e){console.error("Error in JSON extraction:",e),d=x.match(/\{[\s\S]*\}/)}if(!d)throw console.error("Failed to extract JSON from:",x.substring(0,500)+"..."),Error("Could not find valid JSON in the response");let j=d[0];try{j=(j=(j=j.replace(/[\u0000-\u001F\u007F-\u009F]/g," ")).replace(/"(?:[^"\\]|\\.)*"/g,function(e){return e.replace(/\\(?!["\\/bfnrt])/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\f/g,"\\f")})).replace(/,\s*}/g,"}").replace(/,\s*\]/g,"]").replace(/"\s+"/g,'" "').replace(/"\{/g,"{").replace(/\}"/g,"}").replace(/"\[/g,"[").replace(/\]"/g,"]");let e=j.split("\n");e.length>=13&&(e[12]=e[12].replace(/(".*?)([\u0000-\u001F])(.+?")/g,"$1\\$2$3"),j=e.join("\n")),j=j.replace(/"(?:[^"\\]|\\["\\bfnrt])*"/g,function(e){return e.replace(/\\([^"\\bfnrt/])/g,"\\\\$1")})}catch(e){console.error("Error during JSON sanitization:",e)}let w=!1;try{u=JSON.parse(j),w=!0,console.log("Successfully parsed JSON on first attempt")}catch(e){console.error("Initial JSON parsing error:",e),console.log("Attempting more aggressive JSON cleaning...");try{let e=j.replace(/\\(?!["\\/bfnrt])/g,"\\\\").replace(/[\n\r\t\f]/g," ").replace(/"\s+"/g,'" "').replace(/([^\\])"/g,'$1\\"').replace(/\\\\"/g,'\\"').replace(/\\"/g,'\\"');u=JSON.parse(e),w=!0,console.log("Successfully parsed JSON on second attempt")}catch(e){console.error("Second parsing attempt failed:",e);try{let e=j.match(/"categories"\s*:\s*(\[[\s\S]*?\])/);if(e){let t='{"categories":'.concat(e[1],"}");u=JSON.parse(t),w=!0,console.log("Successfully parsed partial JSON (categories only)")}else throw Error("Couldn't find categories array")}catch(e){console.error("Third parsing attempt failed:",e);try{let e=j.replace(/("[^"]*)(")([^"]*")/g,'$1\\"$3').replace(/([\[\{,]\s*)([^,\{\[\]\"\d-])/g,'$1"$2').replace(/([^\s\]\}"])(\s*[\]\},])/g,'$1"$2');u=JSON.parse(e),w=!0,console.log("Successfully parsed JSON on fourth attempt")}catch(e){console.error("Final parsing attempt failed:",e)}}}}w||(console.log("Creating mock data as fallback"),u={categories:l.map((e,t)=>({title:"".concat(e," (AI Error)"),questions:o.map((e,t)=>({text:"JSON parse error occurred. This is a fallback question ".concat(t+1," for ").concat(e," points."),answer:"What is a JSON parsing error?",value:e,revealed:!1,answered:!1,dailyDouble:!1}))}))});let S=u.categories.map(e=>{let t={200:0,400:0,600:0,800:0,1e3:0};try{let a=localStorage.getItem("jeopardy_difficulty_adjustments");if(a){let s=JSON.parse(a),r=Object.keys(s).find(t=>t.toLowerCase().includes(e.title.toLowerCase())||e.title.toLowerCase().includes(t.toLowerCase()));r&&(t=s[r],console.log('Applied difficulty adjustments from similar category "'.concat(r,'" to "').concat(e.title,'"')))}}catch(e){console.error("Error loading difficulty adjustments:",e)}let a=e.questions.map(t=>{let a=validateQuestionRule(e.title,t.text,t.answer);return a.valid||(logBadResponse(e.title,t.text,t.answer,a.reason||"Unknown rule violation"),console.warn("Rule violation in generated question: ".concat(a.reason))),{text:t.text,answer:t.answer,value:t.value,revealed:!1,answered:!1,dailyDouble:!0===t.dailyDouble,ruleViolation:a.valid?null:a.reason,ratings:[]}});return{title:e.title,questions:a,difficultyAdjustments:t}});if(S.length<6){console.log("API returned only ".concat(S.length," categories instead of 6. Adding missing categories."));let e=6-S.length,t=l.slice(0,e).map(e=>({title:"".concat(e," (Generated)"),questions:o.map(createDefaultQuestions)}));S=[...S,...t]}else S.length>6&&(console.log("API returned ".concat(S.length," categories instead of 6. Trimming to 6 categories.")),S=S.slice(0,6));let k=0,C=[];if(S.forEach((e,t)=>{e.questions.forEach((e,a)=>{e.dailyDouble&&k++,C.push({categoryIndex:t,questionIndex:a})})}),console.log("Board has ".concat(k," Daily Doubles (target: 2)")),k>2){console.log("Removing ".concat(k-2," excess Daily Doubles"));let e=[];S.forEach((t,a)=>{t.questions.forEach((t,s)=>{t.dailyDouble&&e.push({categoryIndex:a,questionIndex:s})})}),e.sort(()=>Math.random()-.5);for(let t=0;t<e.length-2;t++){let{categoryIndex:a,questionIndex:s}=e[t];S[a].questions[s].dailyDouble=!1}}else if(k<2){console.log("Adding ".concat(2-k," missing Daily Doubles")),C.sort(()=>Math.random()-.5);let e=C.filter(e=>{let{categoryIndex:t,questionIndex:a}=e;return!S[t].questions[a].dailyDouble});for(let t=0;t<2-k&&t<e.length;t++){let{categoryIndex:a,questionIndex:s}=e[t];S[a].questions[s].dailyDouble=!0}}n({...a,categories:S}),P(!1);return}catch(e){if(b=e,console.error("API request error:",e),"TypeError"===e.name){console.log("Network error detected - this is often a CORS issue or network connectivity problem");let e=Error("Network error when trying to connect to the API. This might be due to:\n1. CORS restrictions (browser security preventing direct API access)\n2. Network connectivity issues\n3. Ad blockers or privacy extensions blocking the request\n4. VPN or proxy issues\n\n"+"".concat("Consider trying a different API provider or check your network connection.","\n\n")+'Try these solutions:\n- Try using a different AI provider (like OpenAI or Mistral)\n- Check your ad blockers and disable them for this site\n- Make sure your API key format is correct (Claude API keys start with "sk-ant-")\n- Try using a different browser (Chrome tends to work best)\n- Verify your internet connection is stable\n- Try temporarily disabling any VPN services');throw e}if((e instanceof TypeError||"string"==typeof e.message&&(e.message.includes("Rate limit exceeded")||e.message.includes("experiencing issues")))&&++f<=4){console.log("Request failed, retrying (".concat(f,"/").concat(4,"):"),e),await new Promise(e=>setTimeout(e,1e3*Math.pow(2,f)));continue}throw e}if(!v&&b)throw b;P(!1)}catch(s){console.error("Error generating questions:",s);let e=s instanceof Error?s.message:String(s),t=document.createElement("div");t.className="error-notification",t.innerHTML='\n        <div class="error-content">\n          <h3>Question Generation Failed</h3>\n          <p>'.concat(e,"</p>\n          <button>Close</button>\n        </div>\n      ");let a=t.querySelector("button");a&&a.addEventListener("click",()=>{document.body.removeChild(t)}),document.body.appendChild(t)}finally{E(!1)}};return(0,s.jsxs)("div",{className:"jeopardy-game ".concat(_),children:[(0,s.jsxs)("div",{className:"game-board",children:[(0,s.jsx)("h1",{className:"game-title",children:"Jeopardy!"}),(0,s.jsxs)("div",{className:"game-controls",children:[(0,s.jsx)("button",{onClick:()=>P(!A),children:"AI Settings & Generate"}),(0,s.jsx)("button",{onClick:()=>W(!B),children:B?"Close Editor":"Edit Board"}),(0,s.jsxs)("button",{onClick:()=>{Z([...a.players]),et(a.players.length),Y(!0)},children:["Players (",a.players.length,")"]}),(0,s.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to reset the game? All progress will be lost.")&&(n({categories:initializeCategories(),players:initializePlayers(e),currentPlayer:0,finalJeopardyActive:!1}),c(null),u(!1))},children:"Reset Game"}),(0,s.jsx)("button",{onClick:()=>{(allQuestionsAnswered()||window.confirm("Not all questions have been answered. Are you sure you want to proceed to Final Jeopardy?"))&&n({...a,finalJeopardyActive:!0})},disabled:a.finalJeopardyActive,children:"Final Jeopardy"}),(0,s.jsxs)("div",{className:"export-import-controls",children:[(0,s.jsx)("button",{className:"export-button",onClick:()=>{try{let e={name:"Jeopardy Board Export - ".concat(new Date().toLocaleString()),date:new Date().toISOString(),gameState:a,version:"1.0"},t=JSON.stringify(e,null,2);if(t.length>10485760){alert("Game board is too large to export. Please reduce the number of categories or questions.");return}let s=new Blob([t],{type:"application/json"});if(navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")){let e=window.open();e&&(e.document.write("<pre>".concat(t,"</pre>")),e.document.title="Jeopardy Board Export - Copy and Save as .json file")}else{let e=URL.createObjectURL(s),t=document.createElement("a");t.href=e,t.download="jeopardy-board-".concat(Date.now(),".json"),t.style.display="none",document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),URL.revokeObjectURL(e)},100)}console.log("Game board exported successfully")}catch(e){console.error("Export error:",e),alert("Failed to export game board. Please try again.")}},children:"Export Board"}),(0,s.jsxs)("label",{className:"import-button",children:["Import Board",(0,s.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(a.size>10485760){alert("File is too large. Please select a file smaller than 10MB."),e.target.value="";return}if(!a.name.toLowerCase().endsWith(".json")){alert("Please select a valid JSON file."),e.target.value="";return}let s=new FileReader;s.onerror=()=>{alert("Error reading file. Please try again."),e.target.value=""},s.onload=t=>{try{var a;let e=null===(a=t.target)||void 0===a?void 0:a.result;if(!e||""===e.trim())throw Error("File is empty");let s=JSON.parse(e);if(!s||"object"!=typeof s)throw Error("Invalid file format - not a valid JSON object");if(!s.gameState||!s.gameState.categories||!s.gameState.players)throw Error("Invalid file format - missing required game data");if(!Array.isArray(s.gameState.categories)||!Array.isArray(s.gameState.players))throw Error("Invalid file format - categories and players must be arrays");if(6!==s.gameState.categories.length)throw Error("Invalid file format - must have exactly 6 categories");let r='Import "'.concat(s.name||"Unnamed Board",'"?\n\nThis will replace your current game board and all progress will be lost.');window.confirm(r)&&(n(s.gameState),c(null),u(!1),F({}),$(null),U(!1),console.log("Game board imported successfully"))}catch(t){let e=t instanceof Error?t.message:"Unknown error";alert("Error importing file: ".concat(e)),console.error("Import error:",t)}finally{e.target.value=""}},s.readAsText(a)},style:{display:"none"}})]})]}),(0,s.jsxs)("select",{value:_,onChange:e=>R(e.target.value),className:"theme-selector",children:[(0,s.jsx)("option",{value:"standard",children:"Standard Theme"}),(0,s.jsx)("option",{value:"dark",children:"Dark Theme"}),(0,s.jsx)("option",{value:"retro",children:"Retro Theme"})]})]}),A&&(0,s.jsx)("div",{className:"settings-modal",children:(0,s.jsxs)("div",{className:"settings-content",children:[(0,s.jsx)("h2",{children:"AI Settings"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:(0,s.jsx)("span",{className:"label-text",children:"AI Provider:"})}),(0,s.jsxs)("select",{value:g,onChange:e=>{m(e.target.value),J(null)},style:{width:"100%",padding:"10px",backgroundColor:"#001a4d",color:"white",border:"2px solid #4a90e2",borderRadius:"4px",fontSize:"1rem"},children:[(0,s.jsx)("option",{value:"openrouter",children:"OpenRouter (Cloud API)"}),(0,s.jsx)("option",{value:"ollama",children:"Ollama (Local Models)"})]})]}),(0,s.jsxs)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"15px",borderRadius:"8px",marginBottom:"20px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,s.jsx)("button",{onClick:testApiKey,disabled:O||("openrouter"===g?!h||!y:!x),style:{width:"100%",padding:"10px",backgroundColor:O?"#666":"#2e7d32",color:"white",border:"2px solid #81c784",borderRadius:"4px",fontWeight:"bold",cursor:!O&&("openrouter"===g?h&&y:x)?"pointer":"not-allowed",fontSize:"1rem",transition:"all 0.2s ease"},children:O?"Testing...":"Test API Connection"}),D&&(0,s.jsx)("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:D.success?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)",border:"1px solid ".concat(D.success?"#4caf50":"#f44336"),borderRadius:"4px",color:D.success?"#81c784":"#ef9a9a",fontSize:"0.9rem",fontWeight:D.success?"bold":"normal"},children:D.message}),(0,s.jsx)("p",{style:{marginTop:"10px",marginBottom:"0",fontSize:"0.85rem",color:"#b3d9ff",fontStyle:"italic",textAlign:"center"},children:"Test your API key and model before generating questions"})]}),"openrouter"===g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"API Key:"}),(0,s.jsx)("input",{type:"password",value:h,onChange:e=>{p(e.target.value),J(null)},placeholder:"Enter your OpenRouter API key"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"Model ID:"}),(0,s.jsx)("span",{className:"label-hint",style:{fontSize:"0.85em",color:"#888",display:"block",marginTop:"4px"},children:"Suggested: google/gemini-2.5-flash-lite, google/gemini-2.0-flash-001, google/gemma-3-27b, openai/gpt-5-nano, openai/gpt-4.1-mini, openai/gpt-oss-120b, qwen/qwen3-235b-a22b-2507, qwen/qwen3-30b-a3b-thinking-2507, deepseek/deepseek-chat-v3.1, anthropic/claude-3.5-haiku"})]}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>{f(e.target.value),J(null)},placeholder:"e.g. openai/gpt-4.1-mini, google/gemini-2.0-flash-001, deepseek/deepseek-chat-v3.1"})]})]}),"ollama"===g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"Ollama URL:"}),(0,s.jsx)("span",{className:"label-hint",children:"Local Ollama server endpoint"})]}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>{b(e.target.value),J(null)},placeholder:"http://localhost:11434"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"Model Name:"}),(0,s.jsx)("span",{className:"label-hint",children:"e.g. llama2, mistral, gemma, mixtral"})]}),(0,s.jsx)("input",{type:"text",value:x,onChange:e=>{v(e.target.value),J(null)},placeholder:"e.g. llama2, mistral"})]}),(0,s.jsxs)("div",{style:{padding:"10px",backgroundColor:"rgba(102, 179, 255, 0.1)",border:"1px solid #4a90e2",borderRadius:"4px",marginBottom:"15px",fontSize:"0.9rem",color:"#b3d9ff"},children:[(0,s.jsx)("strong",{children:"\uD83D\uDCDD Note:"})," Make sure Ollama is running locally with: ",(0,s.jsx)("code",{style:{backgroundColor:"rgba(0,0,0,0.3)",padding:"2px 4px",borderRadius:"3px"},children:"ollama serve"}),(0,s.jsx)("br",{}),"Pull models with: ",(0,s.jsx)("code",{style:{backgroundColor:"rgba(0,0,0,0.3)",padding:"2px 4px",borderRadius:"3px"},children:"ollama pull llama2"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"Temperature:"}),(0,s.jsx)("span",{className:"label-hint",children:"Higher values = more creative/varied results (0.0-1.0)"})]}),(0,s.jsxs)("div",{className:"temperature-control",children:[(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:w,onChange:e=>N(parseFloat(e.target.value)),className:"temperature-slider"}),(0,s.jsx)("span",{className:"temperature-value",children:w})]})]}),(0,s.jsxs)("div",{className:"form-group system-message-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"System Message:"}),(0,s.jsx)("span",{className:"label-hint",children:"Instructions for how the AI should generate questions"})]}),(0,s.jsx)("textarea",{value:S,onChange:e=>k(e.target.value),placeholder:"Instructions for the AI (e.g., 'Create challenging academic questions suitable for high school students')",rows:5,className:"system-message-input"})]}),(0,s.jsxs)("div",{className:"form-group reference-text-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"Reference Text (Optional):"}),(0,s.jsx)("span",{className:"label-hint",children:"Add content to generate subject-specific questions"})]}),(0,s.jsx)("textarea",{value:C,onChange:e=>I(e.target.value),placeholder:"Paste text, articles, or lesson material that should be used as the basis for questions",rows:5,className:"reference-text-input"})]}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:generateQuestions,disabled:q,children:q?"Generating...":"Save & Generate"}),(0,s.jsx)("button",{onClick:()=>P(!1),children:"Cancel"})]})]})}),a.finalJeopardyActive?(0,s.jsxs)("div",{className:"final-jeopardy",children:[(0,s.jsx)("h2",{children:"Final Jeopardy"}),(0,s.jsx)("p",{children:"Coming soon!"}),(0,s.jsx)("button",{onClick:()=>{alert("Final Jeopardy functionality will be implemented in a future update.")},children:"Continue"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"categories-row",children:a.categories.map((e,t)=>(0,s.jsxs)("div",{className:"category-header ".concat(B?"editable":""),onClick:()=>handleEditCategory(t),children:[e.title,B&&(0,s.jsx)("div",{className:"edit-icon",children:"✏️"})]},t))}),[0,1,2,3,4].map(e=>(0,s.jsx)("div",{className:"questions-row",children:a.categories.map((t,a)=>{let r=t.questions[e];return(0,s.jsx)("div",{className:"question-cell ".concat(r.answered?"answered":""," ").concat(B?"editable":""," ").concat(r.dailyDouble&&r.revealed?"daily-double":""),onClick:()=>{B?handleEditQuestion(a,e):handleQuestionSelect(a,e)},children:(0,s.jsxs)("div",{className:"question-value-container",children:[r.answered&&!B?"":(0,s.jsxs)(s.Fragment,{children:["$".concat(r.value),r.dailyDouble&&!r.answered&&B&&(0,s.jsx)("div",{className:"daily-double-indicator",children:"DD"}),B&&t.difficultyAdjustments&&0!==t.difficultyAdjustments[r.value]&&(0,s.jsxs)("div",{className:"difficulty-indicator ".concat(t.difficultyAdjustments[r.value]>0?"harder":"easier"),children:[t.difficultyAdjustments[r.value]>0?"↑":"↓",Math.abs(t.difficultyAdjustments[r.value])]})]}),B&&(0,s.jsx)("div",{className:"edit-icon",children:"✏️"})]})},"".concat(a,"-").concat(e))})},e))]}),i&&(0,s.jsx)("div",{className:"question-view",children:(0,s.jsx)("div",{className:"question-content",children:a.categories[i.categoryIndex].questions[i.questionIndex].dailyDouble&&z?(0,s.jsxs)("div",{className:"daily-double-reveal",children:[(0,s.jsx)("h2",{children:"Daily Double!"}),(0,s.jsx)("div",{className:"daily-double-animation"}),(0,s.jsxs)("div",{className:"daily-double-wager",children:[(0,s.jsxs)("p",{className:"wager-instructions",children:[a.players[a.currentPlayer].name,", enter your wager:"]}),(0,s.jsxs)("div",{className:"wager-info",children:[(0,s.jsxs)("p",{children:["Current score: $",a.players[a.currentPlayer].score]}),(0,s.jsxs)("p",{children:["Maximum wager: $",Math.max(a.players[a.currentPlayer].score,1e3)]}),(0,s.jsx)("p",{className:"wager-note",children:"Wagers must be in $100 increments"})]}),(0,s.jsxs)("div",{className:"wager-input-container",children:[(0,s.jsx)("input",{type:"number",className:"wager-input",placeholder:"Enter wager",min:100,max:Math.max(a.players[a.currentPlayer].score,1e3),step:100,onChange:e=>{let t=parseInt(e.target.value)||0;$(100*Math.round(t/100))}}),(0,s.jsx)("button",{className:"wager-button",onClick:()=>handleDailyDoubleWager(L||a.categories[i.categoryIndex].questions[i.questionIndex].value),children:"Confirm Wager"})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[a.categories[i.categoryIndex].questions[i.questionIndex].dailyDouble&&!z?(0,s.jsxs)("div",{className:"daily-double-question",children:[(0,s.jsxs)("div",{className:"daily-double-header",children:[(0,s.jsx)("h2",{children:"Daily Double"}),(0,s.jsxs)("p",{className:"wager-display",children:["Wager: $",L]})]}),(0,s.jsx)("p",{className:"question-text",children:a.categories[i.categoryIndex].questions[i.questionIndex].text})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h2",{children:["$",a.categories[i.categoryIndex].questions[i.questionIndex].value]}),(0,s.jsx)("p",{className:"question-text",children:a.categories[i.categoryIndex].questions[i.questionIndex].text})]}),d&&(0,s.jsxs)("div",{className:"answer",children:[(0,s.jsx)("h3",{children:"Correct Response:"}),(0,s.jsx)("p",{className:"correct-response",children:a.categories[i.categoryIndex].questions[i.questionIndex].answer})]}),(0,s.jsxs)("div",{className:"question-controls",children:[(0,s.jsxs)("div",{className:"button-row",children:[(0,s.jsx)("button",{onClick:()=>{u(!d)},children:d?"Hide Response":"Show Response"}),d&&(0,s.jsx)("button",{className:"back-button",onClick:()=>{if(i){let{categoryIndex:e,questionIndex:t}=i,s=[...a.categories];s[e].questions[t].answered=!0,n({...a,categories:s})}document.body.style.overflow="",c(null),u(!1),$(null),U(!1)},children:"Return to Board (No Points)"})]}),d?(0,s.jsxs)("div",{className:"player-selection",children:[(0,s.jsx)("h4",{children:"Award Points To:"}),(0,s.jsx)("div",{className:"player-answer-buttons",children:a.players.map((e,t)=>(0,s.jsxs)("div",{className:"player-answer-option",children:[(0,s.jsx)("div",{className:"player-name",children:e.name}),(0,s.jsxs)("div",{className:"answer-buttons",children:[(0,s.jsx)("button",{className:"correct-button",onClick:()=>handleAnswer(!0,t),children:"Correct"}),(0,s.jsx)("button",{className:"incorrect-button",onClick:()=>handleAnswer(!1,t),children:"Incorrect"})]})]},t))}),(0,s.jsxs)("div",{className:"multi-deduction",children:[(0,s.jsx)("h4",{children:"Deduct From Multiple Players"}),(0,s.jsx)("div",{className:"player-checkboxes",children:a.players.map((e,t)=>(0,s.jsxs)("div",{className:"player-checkbox",onClick:()=>toggleIncorrectPlayer(t),children:[(0,s.jsx)("input",{type:"checkbox",id:"incorrect-".concat(t),checked:!!M[t],onChange:()=>{}}),(0,s.jsx)("label",{htmlFor:"incorrect-".concat(t),children:e.name})]},t))}),(0,s.jsx)("button",{className:"deduct-multiple-button",onClick:()=>{if(!i)return;let{categoryIndex:e,questionIndex:t}=i,s=a.categories[e].questions[t].value;a.categories[e].questions[t].dailyDouble&&null!==L&&(s=L);let r=[...a.players];Object.keys(M).forEach(e=>{let t=parseInt(e,10);M[t]&&(r[t].score-=s)});let l=[...a.categories];if(Object.keys(M).length>0){let a={rating:"bad",timestamp:new Date().toISOString()};l[e].questions[t].ratings||(l[e].questions[t].ratings=[]),l[e].questions[t].ratings.push(a)}l[e].questions[t].answered=!0,adjustCategoryDifficulty(l,e);let o=(a.currentPlayer+1)%a.players.length;n({...a,categories:l,players:r,currentPlayer:o}),F({}),document.body.style.overflow="",c(null),u(!1),$(null),U(!1)},disabled:0===Object.keys(M).length,children:Object.keys(M).length>0?"Deduct Points from ".concat(Object.keys(M).length," Player").concat(Object.keys(M).length>1?"s":""):"Select Players to Deduct Points"})]})]}):null]})]})})})]}),(0,s.jsx)("div",{className:"scoreboard",children:a.players.map((e,t)=>(0,s.jsxs)("div",{className:"player ".concat(t===a.currentPlayer?"active":""),children:[(0,s.jsx)("h3",{children:e.name}),(0,s.jsxs)("p",{className:"score",children:["$",e.score]})]},t))}),Q&&(0,s.jsx)("div",{className:"editor-modal",children:(0,s.jsxs)("div",{className:"editor-content",children:[(0,s.jsx)("h2",{children:"Edit Category"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Category Title:"}),(0,s.jsx)("input",{type:"text",value:Q.title,onChange:e=>G({...Q,title:e.target.value}),autoFocus:!0})]}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:()=>{if(!Q)return;let e=[...a.categories];e[Q.index].title=Q.title,n({...a,categories:e}),G(null)},children:"Save"}),(0,s.jsx)("button",{onClick:()=>G(null),children:"Cancel"})]})]})}),H&&(0,s.jsx)("div",{className:"editor-modal",children:(0,s.jsxs)("div",{className:"editor-content",children:[(0,s.jsx)("h2",{children:"Edit Clue"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Clue Text:"}),(0,s.jsx)("textarea",{value:H.text,onChange:e=>X({...H,text:e.target.value}),rows:4,autoFocus:!0,placeholder:"Enter the clue text here"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Correct Response:"}),(0,s.jsx)("input",{type:"text",value:H.answer,onChange:e=>X({...H,answer:e.target.value}),placeholder:"Enter the correct response"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Value:"}),(0,s.jsxs)("select",{value:H.value,onChange:e=>X({...H,value:parseInt(e.target.value,10)}),children:[(0,s.jsx)("option",{value:"200",children:"$200"}),(0,s.jsx)("option",{value:"400",children:"$400"}),(0,s.jsx)("option",{value:"600",children:"$600"}),(0,s.jsx)("option",{value:"800",children:"$800"}),(0,s.jsx)("option",{value:"1000",children:"$1000"})]})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("div",{className:"daily-double-toggle",children:[(0,s.jsx)("input",{type:"checkbox",id:"dailyDoubleToggle",checked:!0===H.dailyDouble,onChange:e=>X({...H,dailyDouble:e.target.checked})}),(0,s.jsx)("label",{htmlFor:"dailyDoubleToggle",children:"Mark as Daily Double"})]})}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:()=>{if(!H)return;let{categoryIndex:e,questionIndex:t,text:s,answer:r,value:l,dailyDouble:o}=H,i=a.categories[e].title,c=validateQuestionRule(i,s,r);if(!c.valid){var d;if(logBadResponse(i,s,r,c.reason||"Format issue"),null===(d=c.reason)||void 0===d?void 0:d.includes("too vague")){let e=window.confirm("Warning: This clue may be problematic.\n\n".concat(c.reason,'\n\nFor example, a clue like "This East Asian country is known for its unique blend of traditional and modern culture" could accept multiple answers like Japan, South Korea, China, etc.\n\nDo you want to save anyway?'));if(!e)return}}let u=[...a.categories];u[e].questions[t]={...u[e].questions[t],text:s,answer:r,value:l,dailyDouble:o,ruleViolation:c.valid?null:c.reason},n({...a,categories:u}),X(null)},children:"Save"}),(0,s.jsx)("button",{onClick:()=>X(null),children:"Cancel"})]})]})}),V&&(0,s.jsx)("div",{className:"editor-modal",children:(0,s.jsxs)("div",{className:"editor-content",children:[(0,s.jsx)("h2",{children:"Player Settings"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Number of Players:"}),(0,s.jsxs)("select",{value:ee,onChange:e=>{let t=parseInt(e.target.value,10);if(et(t),t>K.length){let e=[...K];for(let a=K.length+1;a<=t;a++)e.push({name:"Player ".concat(a),score:0,active:!1});Z(e)}else t<K.length&&Z(K.slice(0,t))},children:[(0,s.jsx)("option",{value:"2",children:"2 Players"}),(0,s.jsx)("option",{value:"3",children:"3 Players"}),(0,s.jsx)("option",{value:"4",children:"4 Players"})]})]}),K.map((e,t)=>(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:["Player ",t+1," Name:"]}),(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>{let a=[...K];a[t].name=e.target.value,Z(a)}})]},t)),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:()=>{let e;if(ee===K.length)e=[...K];else if(ee>K.length){e=[...K];for(let t=K.length+1;t<=ee;t++)e.push({name:"Player ".concat(t),score:0,active:!1})}else e=K.slice(0,ee);n({...a,players:e,currentPlayer:a.currentPlayer>=ee?0:a.currentPlayer}),t(ee),Y(!1)},children:"Save Players"}),(0,s.jsx)("button",{onClick:()=>Y(!1),children:"Cancel"})]})]})})]})}var n=a(6584);function App(){let[e,t]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{t(!0)},[]),e)?(0,s.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-between p-4 md:p-8 lg:p-24 bg-black",children:(0,s.jsx)(n.Z,{children:(0,s.jsx)(JeopardyGame,{})})}):(0,s.jsx)("main",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-black",children:(0,s.jsx)("div",{className:"text-white text-2xl animate-pulse",children:"Loading Jeopardy..."})})}function Home(){return(0,s.jsx)(App,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);